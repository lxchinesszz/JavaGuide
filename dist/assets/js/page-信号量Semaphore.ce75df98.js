(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{688:function(s,a,t){"use strict";t.r(a);var n=t(1),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[t("img",{attrs:{src:"https://img.springlearn.cn/learn_c87a079fcea0d7893b03d4d57478bca7.png",alt:"",loading:"lazy"}})]),s._v(" "),t("p",[t("strong",[s._v("ä½œè€…")]),s._v(": è¥¿é­é™¶æ¸Šæ˜\n"),t("strong",[s._v("åšå®¢")]),s._v(": "),t("a",{attrs:{href:"https://blog.springlearn.cn/",target:"_blank",rel:"noopener noreferrer"}},[s._v("https://blog.springlearn.cn/"),t("OutboundLink")],1)]),s._v(" "),t("div",{staticClass:"custom-block tip"},[t("p",{staticClass:"custom-block-title"},[s._v("è¥¿é­é™¶æ¸Šæ˜")]),s._v(" "),t("p",[s._v("è«ç¬‘å°‘å¹´æ±Ÿæ¹–æ¢¦ï¼Œè°ä¸å°‘å¹´æ¢¦æ±Ÿæ¹–")])]),s._v(" "),t("h2",{attrs:{id:"ğŸš€-çŸ¥è¯†å¿«è¯»"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ğŸš€-çŸ¥è¯†å¿«è¯»"}},[s._v("#")]),s._v(" ğŸš€ çŸ¥è¯†å¿«è¯»")]),s._v(" "),t("p",[t("code",[s._v("Semaphore")]),s._v(" ç¿»è¯‘è¿‡æ¥å°±æ˜¯ä¿¡å·é‡, å…¶æ ¹æœ¬åŸç†å°±æ˜¯åŸºäº "),t("code",[s._v("CAS")]),s._v(" å…±äº«é”çš„ä¸€ç§å®ç°ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ã€‚\nå‡è®¾åœè½¦åœºåªæœ‰ä¸‰ä¸ªè½¦ä½ï¼Œä¸€å¼€å§‹ä¸‰ä¸ªè½¦ä½éƒ½æ˜¯ç©ºçš„ã€‚è¿™æ—¶å¦‚æœåŒæ—¶æ¥äº†äº”è¾†è½¦ï¼Œçœ‹é—¨äººå…è®¸å…¶ä¸­ä¸‰è¾†ä¸å—é˜»ç¢çš„è¿›å…¥ï¼Œç„¶åæ”¾ä¸‹è½¦æ‹¦ï¼Œå‰©ä¸‹çš„è½¦åˆ™å¿…é¡»åœ¨å…¥å£ç­‰å¾…ï¼Œæ­¤åæ¥çš„è½¦ä¹Ÿéƒ½ä¸å¾—ä¸åœ¨å…¥å£å¤„ç­‰å¾…ã€‚è¿™æ—¶ï¼Œæœ‰ä¸€è¾†è½¦ç¦»å¼€åœè½¦åœºï¼Œçœ‹é—¨äººå¾—çŸ¥åï¼Œæ‰“å¼€è½¦æ‹¦ï¼Œæ”¾å…¥ä¸€è¾†ï¼Œå¦‚æœåˆç¦»å¼€ä¸¤è¾†ï¼Œåˆ™åˆå¯ä»¥æ”¾å…¥ä¸¤è¾†ï¼Œå¦‚æ­¤å¾€å¤ã€‚")]),s._v(" "),t("p",[s._v("é‚£ä¹ˆä¸Šé¢çš„è¿™ä¸ªä¾‹å­å¯ä»¥è¿™æ ·ç†è§£ï¼Œèµ„æºä¸€å…±æœ‰3ä¸ª, å³ä¸‰ä¸ªè½¦ä½ã€‚å¦‚ä½•æ¥æ§åˆ¶è¿™5è¾†æ±½è½¦ï¼Œæ¥åˆç†çš„ä½¿ç”¨è¿™3ä¸ªèµ„æºå‘¢?\n"),t("code",[s._v("Semaphore")]),s._v(" å¯ä»¥è¿™æ ·æ¥å®šä¹‰ã€‚")]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 1. å®šä¸€ä¸ªä¿¡å·é‡,å£°æ˜æœ‰3ä¸ªèµ„æºã€‚ä½¿ç”¨å…¬å¹³æ¨¡å¼çº¿ç¨‹å°†ä¼šæŒ‰åˆ°è¾¾çš„é¡ºåºï¼ˆFIFOï¼‰æ‰§è¡Œ(ä¹Ÿå°±æ˜¯ç­‰å¾…æ—¶é—´æœ€é•¿çš„å…ˆæ‰§è¡Œ),å¦‚æœæ˜¯éå…¬å¹³ï¼Œåˆ™å¯ä»¥åè¯·æ±‚çš„æœ‰å¯èƒ½æ’åœ¨é˜Ÿåˆ—çš„å¤´éƒ¨ã€‚")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Semaphore")]),s._v(" semp "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Semaphore")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 2. è·å–1ä¸ªè®¸å¯ - æœ€å¤§å…è®¸3ä¸ªè¿›å…¥ï¼Œä¸€ä½†è¶…è¿‡å°±è®©å…¶ç­‰å¾…,é™¤éå·²ç»é‡Šæ”¾")]),s._v("\nsemp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("acquire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 3. é‡Šæ”¾1ä¸ªè®¸å¯ ")]),s._v("\nsemp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("release")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 4. è·å–1è®¸å¯,å¤±è´¥å°±è¿”å›,ä¸ç­‰å¾…")]),s._v("\nsemp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tryAcquire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 5. è·å–2è®¸å¯,å¤±è´¥å°±è¿”å›,ä¸ç­‰å¾…")]),s._v("\nsemp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tryAcquire")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("  \n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 6. ä¸å…è®¸è¢«ä¸­æ–­")]),s._v("\nsemp"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("acquireUninterruptibly")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br")])]),t("h2",{attrs:{id:"çŸ¥è¯†ç‚¹1-fair-nofair"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹1-fair-nofair"}},[s._v("#")]),s._v(" çŸ¥è¯†ç‚¹1: Fair & NoFair")]),s._v(" "),t("p",[t("code",[s._v("Semaphore")]),s._v(" çš„æ¨¡å¼é…ç½®,åªæ˜¯æ„é€ æ¥å®šä¹‰ã€‚")]),s._v(" "),t("ul",[t("li",[s._v("é»˜è®¤æ„é€ ä¸å…¬å¹³æ¨¡å¼, è°æ¥ç”³è¯·èµ„æº,å°±å…ˆå°è¯•è·å–èµ„æºã€‚æ’é˜Ÿçš„è¦ç­‰åˆ°æ²¡æœ‰èµ„æºè¿›æ¥ç”³è¯·æ‰èƒ½ç»§ç»­ç”³è¯·")])]),s._v(" "),t("div",{staticClass:"language-java line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-java"}},[t("code",[s._v("    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Semaphore")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("permits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        sync "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NonfairSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("permits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("public")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("Semaphore")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("int")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("permits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("boolean")]),s._v(" fair"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n        sync "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" fair "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("FairSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("permits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("new")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[s._v("NonfairSync")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("permits")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://img.springlearn.cn/blog/learn_1640531082000.png",alt:"",loading:"lazy"}})]),s._v(" "),t("h2",{attrs:{id:"çŸ¥è¯†ç‚¹2-ç”³è¯·èµ„æº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹2-ç”³è¯·èµ„æº"}},[s._v("#")]),s._v(" çŸ¥è¯†ç‚¹2: ç”³è¯·èµ„æº")]),s._v(" "),t("ul",[t("li",[s._v("acquire() è·å–1ä¸ªèµ„æº,è·å–ä¸åˆ°å°±ç­‰å¾…,å¦‚æœçº¿ç¨‹ä¸­æ–­,ä¼šç›´æ¥ä¸­æ–­ã€‚")]),s._v(" "),t("li",[s._v("acquire(2) è·å–2ä¸ªèµ„æº,è·å–ä¸åˆ°å°±ç­‰å¾…,å¦‚æœçº¿ç¨‹ä¸­æ–­,ä¼šç›´æ¥ä¸­æ–­ã€‚")]),s._v(" "),t("li",[s._v("tryAcquire() è·å–1ä¸ªèµ„æº,è·å–ä¸åˆ°å°±è¿”å› "),t("code",[s._v("false")]),s._v(",å¦‚æœçº¿ç¨‹ä¸­æ–­,ä¼šç›´æ¥ä¸­æ–­ã€‚")]),s._v(" "),t("li",[s._v("acquireUninterruptibly() è·å–1ä¸ªèµ„æº,è·å–ä¸åˆ°å°±ç­‰å¾…,ä¸ä¼šå…³å¿ƒçº¿ç¨‹ä¸­æ–­ã€‚")])]),s._v(" "),t("h2",{attrs:{id:"çŸ¥è¯†ç‚¹3-é‡Šæ”¾èµ„æº"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹3-é‡Šæ”¾èµ„æº"}},[s._v("#")]),s._v(" çŸ¥è¯†ç‚¹3: é‡Šæ”¾èµ„æº")]),s._v(" "),t("ul",[t("li",[s._v("release() é‡Šæ”¾ä¸€ä¸ªèµ„æº")]),s._v(" "),t("li",[s._v("release(2) é‡Šæ”¾ä¸¤ä¸ªèµ„æº")])]),s._v(" "),t("h2",{attrs:{id:"çŸ¥è¯†ç‚¹4-å…¶ä»–api"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#çŸ¥è¯†ç‚¹4-å…¶ä»–api"}},[s._v("#")]),s._v(" çŸ¥è¯†ç‚¹4: å…¶ä»–API")]),s._v(" "),t("ul",[t("li",[s._v("availablePermits() å½“å‰èµ„æºæ•°é‡")]),s._v(" "),t("li",[s._v("drainPermits() è·å–å½“å‰èµ„æºæ•°é‡ï¼Œå¹¶å°†å‰©ä½™èµ„æºæ¸…é›¶ï¼Œç›´æ¥èµ‹å€¼0")]),s._v(" "),t("li",[s._v("reducePermits(2) å°†èµ„æºæ•°é‡ï¼Œæ‰£å‡2ä¸ª")]),s._v(" "),t("li",[s._v("isFair() æ˜¯å¦å…¬å¹³")]),s._v(" "),t("li",[s._v("hasQueuedThreads() æ˜¯å¦è¿˜æœ‰çº¿ç¨‹ç­‰å¾…")]),s._v(" "),t("li",[s._v("getQueueLength() è¿˜æœ‰å¤šå°‘çº¿ç¨‹ç­‰å¾…")]),s._v(" "),t("li",[s._v("getQueuedThreads() è·å–æ‰€æœ‰çš„çº¿ç¨‹é›†åˆ")])])])}),[],!1,null,null,null);a.default=e.exports}}]);